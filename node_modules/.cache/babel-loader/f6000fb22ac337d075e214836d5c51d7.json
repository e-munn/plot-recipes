{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/elimunn/Desktop/plot-recipes/src/components/lists/ingredientList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState, useEffect } from 'react';\n\nconst IngredientList = ({\n  recipe\n}) => {\n  _s();\n\n  const [focus, setFocus] = useState(false);\n  const prevFocus = useRef(false);\n  useEffect(() => {\n    if (!(focus == false)) {\n      var cur = select(focus[0].parentElement);\n      var all = select(focus[0].parentElement.parentElement).selectAll('g');\n      var t1 = transition().duration(180).ease(easeCubicOut);\n      var t2 = transition().duration(1000).ease(easeCubicIn);\n      all // .attr('filter', 'url(#blur)')\n      .attr('opacity', .5);\n      cur.attr('filter', 'none').attr('opacity', 1);\n      var textColor;\n\n      if (cur.attr('class') == 'ingredient') {\n        var cX = cur.select('circle').attr('cx');\n        var cY = cur.select('circle').attr('cy');\n        var curX = +cX + 10;\n        var curY = +cY;\n        textColor = color.blue2;\n      } else if (cur.attr('class') == 'action') {\n        var cX = cur.select('rect').attr('x');\n        var cY = cur.select('rect').attr('y');\n        var curX = +cX + 10 + dim.i.radius;\n        var curY = +cY + 8;\n        textColor = color.orange2;\n      }\n\n      var rect = cur.append('rect').classed('focus', 1).attr('x', curX).attr('y', curY - dim.i.font.size).attr('width', 160).attr('height', dim.i.font.size * 2).attr('fill', color.background);\n      var amt = cur.append('text').classed('focus', 1).attr('x', curX).attr('y', curY).attr('fill', textColor).attr('font-size', dim.i.font.detailSize).attr('alignment-baseline', 'middle').text(focus[1].data.detail);\n      var svgWidth = focus[0].parentElement.parentElement.parentElement;\n      svgWidth = select(svgWidth).attr('width');\n      var svgHeight = focus[0].parentElement.parentElement.parentElement;\n      svgHeight = select(svgHeight).attr('height');\n      console.log(cur);\n      var clickOn = focus[0].parentElement;\n      var svgT = clickOn.parentElement.parentElement;\n      svgT = select(svgT);\n      clickOn = select(clickOn);\n      var clickoff = clickOn.append('rect').classed('focus', 1).attr('x', -dim.m.margin.left / 2).attr('y', 0).attr('width', '100vw').attr('height', +svgHeight).attr('fill', 'transparent').attr('opacity', 1).on('click', () => {\n        cur.selectAll('.focus').remove();\n        all.attr('filter', 'none').attr('opacity', 1);\n      });\n      clickOn.lower();\n      rect.raise();\n      amt.raise();\n\n      if (!(prevFocus.current == false)) {\n        var prev = prevFocus.current;\n        prev = prev[0];\n        prev = prev.parentElement;\n        prev = select(prev);\n        var rem = prev.selectAll('.focus');\n        rem.remove();\n      }\n\n      prevFocus.current = focus;\n    }\n  }, [focus]);\n  var root = recipe;\n  var plate = [/*#__PURE__*/_jsxDEV(Plate, {\n    root: root\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this)];\n  var allVessels = root.descendants().filter(d => 'vessel' in d.data).filter(d => d.depth !== 0).sort((a, b) => {\n    return ascending(a.data.stepOrder, b.data.stepOrder);\n  });\n  var flows = [];\n  allVessels.forEach((a, i) => {\n    const vessel = [];\n    vessel.push( /*#__PURE__*/_jsxDEV(Vessel, {\n      a: a,\n      i: i,\n      dim: dim,\n      color: color\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this));\n    const ingredientNodes = [];\n    a.children.forEach((b, j) => {\n      if ('ingredient' in b.data) {\n        ingredientNodes.push( /*#__PURE__*/_jsxDEV(IngredientNode, {\n          color: color,\n          dim: dim,\n          a: a,\n          b: b,\n          j: j,\n          focus: focus,\n          setFocus: setFocus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this));\n      }\n    });\n    const actionNodes = [];\n    a.children.forEach((b, j) => {\n      if ('action' in b.data) {\n        actionNodes.push( /*#__PURE__*/_jsxDEV(Action, {\n          color: color,\n          dim: dim,\n          a: a,\n          b: b,\n          j: j,\n          focus: focus,\n          setFocus: setFocus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this));\n      }\n    });\n    flows.push( /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [vessel, actionNodes, ingredientNodes, plate]\n    }, void 0, true));\n  });\n  return /*#__PURE__*/_jsxDEV(\"g\", {\n    transform: `translate(${0}, ${50})`,\n    children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n      children: [/*#__PURE__*/_jsxDEV(\"filter\", {\n        id: \"blur\",\n        x: \"-0.08\",\n        y: \"0\",\n        children: [/*#__PURE__*/_jsxDEV(\"feGaussianBlur\", {\n          in: \"SourceGraphic\",\n          stdDeviation: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"feOffset\", {\n          dx: \"0\",\n          dy: \"0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"filter\", {\n        id: \"shadow\",\n        x: \"0\",\n        y: \"0\",\n        width: \"200%\",\n        height: \"200%\",\n        children: [/*#__PURE__*/_jsxDEV(\"feOffset\", {\n          result: \"offOut\",\n          in: \"SourceAlpha\",\n          dx: \".1\",\n          dy: \".1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"feGaussianBlur\", {\n          result: \"blurOut\",\n          in: \"offOut\",\n          stdDeviation: \".1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"feBlend\", {\n          in: \"SourceGraphic\",\n          in2: \"blurOut\",\n          mode: \"normal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 9\n    }, this), flows]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 200,\n    columnNumber: 7\n  }, this);\n};\n\n_s(IngredientList, \"zfj0gqUUQ7CbnO+LPhI/uSYneLg=\");\n\n_c = IngredientList;\nexport default IngredientList;\n\nvar _c;\n\n$RefreshReg$(_c, \"IngredientList\");","map":{"version":3,"sources":["/Users/elimunn/Desktop/plot-recipes/src/components/lists/ingredientList.js"],"names":["React","useRef","useState","useEffect","IngredientList","recipe","focus","setFocus","prevFocus","cur","select","parentElement","all","selectAll","t1","transition","duration","ease","easeCubicOut","t2","easeCubicIn","attr","textColor","cX","cY","curX","curY","color","blue2","dim","i","radius","orange2","rect","append","classed","font","size","background","amt","detailSize","text","data","detail","svgWidth","svgHeight","console","log","clickOn","svgT","clickoff","m","margin","left","on","remove","lower","raise","current","prev","rem","root","plate","allVessels","descendants","filter","d","depth","sort","a","b","ascending","stepOrder","flows","forEach","vessel","push","ingredientNodes","children","j","actionNodes"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\n\nconst IngredientList = ({ recipe }) => {\n\n  const [focus, setFocus] = useState(false);\n  const prevFocus = useRef(false);\n\n\n  useEffect(() => {\n\n    if(!(focus == false)){\n\n        var cur = select(focus[0].parentElement)\n        var all = select(focus[0].parentElement.parentElement).selectAll('g')\n\n        var t1 = transition()\n          .duration(180)\n          .ease(easeCubicOut)\n        var t2 = transition()\n          .duration(1000)\n          .ease(easeCubicIn)\n\n        all\n          // .attr('filter', 'url(#blur)')\n          .attr('opacity', .5)\n\n        cur\n          .attr('filter', 'none')\n          .attr('opacity', 1)\n\n        var textColor\n        if(cur.attr('class') == 'ingredient'){\n          var cX = cur.select('circle').attr('cx')\n          var cY = cur.select('circle').attr('cy')\n          var curX = +cX + 10\n          var curY = +cY\n          textColor = color.blue2\n\n        } else if(cur.attr('class') == 'action'){\n          var cX = cur.select('rect').attr('x')\n          var cY = cur.select('rect').attr('y')\n          var curX = +cX + 10 + dim.i.radius\n          var curY = +cY + 8\n          textColor = color.orange2\n\n        }\n\n\n        var rect = cur.append('rect')\n          .classed('focus', 1)\n          .attr('x', curX)\n          .attr('y', curY - dim.i.font.size)\n          .attr('width', 160)\n          .attr('height', dim.i.font.size * 2)\n          .attr('fill', color.background)\n\n\n\n\n\n        var amt = cur.append('text')\n          .classed('focus', 1)\n          .attr('x', curX)\n          .attr('y', curY)\n          .attr('fill', textColor)\n          .attr('font-size', dim.i.font.detailSize)\n          .attr('alignment-baseline', 'middle')\n          .text( focus[1].data.detail )\n\n        var svgWidth = focus[0].parentElement.parentElement.parentElement\n        svgWidth = select(svgWidth).attr('width')\n        var svgHeight = focus[0].parentElement.parentElement.parentElement\n        svgHeight = select(svgHeight).attr('height')\n\n\n        console.log(cur)\n\n\n        var clickOn = focus[0].parentElement\n\n        var svgT = clickOn.parentElement.parentElement\n\n        svgT = select(svgT)\n\n        clickOn = select(clickOn)\n\n        var clickoff = clickOn.append('rect')\n          .classed('focus', 1)\n          .attr('x', -dim.m.margin.left/2)\n          .attr('y', 0)\n          .attr('width', '100vw')\n          .attr('height', +svgHeight)\n          .attr('fill', 'transparent')\n          .attr('opacity', 1)\n          .on('click', () => {\n            cur.selectAll('.focus').remove()\n            all\n              .attr('filter', 'none')\n              .attr('opacity', 1)\n          })\n\n        clickOn.lower()\n\n        rect.raise()\n        amt.raise()\n\n        if (!(prevFocus.current == false)){\n          var prev = prevFocus.current\n          prev = prev[0]\n          prev = prev.parentElement\n          prev = select(prev)\n          var rem = prev.selectAll('.focus')\n          rem.remove()\n\n        }\n        prevFocus.current = focus\n\n      }\n    }, [focus])\n\n\n\n\n\n  var root = recipe\n\n\n  var plate=[(\n    <Plate\n      root={root}\n    />\n  )]\n\n\n\n  var allVessels = root.descendants().filter(d => ('vessel' in d.data)).filter(d => (d.depth !== 0)).sort((a,b) => {return ascending(a.data.stepOrder, b.data.stepOrder)} )\n\n\n  var flows = []\n\n  allVessels.forEach((a,i) => {\n\n    const vessel = []\n    vessel.push(\n      <Vessel\n        a={a}\n        i={i}\n        dim={dim}\n        color={color}\n      />\n    )\n\n    const ingredientNodes = []\n\n    a.children.forEach((b,j) => {\n      if ('ingredient' in b.data) {\n        ingredientNodes.push(\n          <IngredientNode\n            color={color}\n            dim={dim}\n            a={a}\n            b={b}\n            j={j}\n            focus={focus}\n            setFocus={setFocus}\n          />)\n        }\n      })\n\n    const actionNodes = []\n\n    a.children.forEach((b,j) => {\n      if ('action' in b.data) {\n        actionNodes.push(\n          <Action\n            color={color}\n            dim={dim}\n            a={a}\n            b={b}\n            j={j}\n            focus={focus}\n            setFocus={setFocus}\n          />)\n        }\n      })\n\n\n\n    flows.push(\n      <>\n        {vessel}\n        {actionNodes}\n        {ingredientNodes}\n        {plate}\n      </>\n    )\n  })\n\n  return (\n      <g\n        transform={`translate(${0}, ${50})`}\n        >\n        <defs>\n          <filter id=\"blur\" x=\"-0.08\" y=\"0\">\n            <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"1\" />\n            <feOffset dx=\"0\" dy=\"0\" />\n          </filter>\n          <filter id=\"shadow\" x=\"0\" y=\"0\" width=\"200%\" height=\"200%\">\n            <feOffset result=\"offOut\" in=\"SourceAlpha\" dx=\".1\" dy=\".1\" />\n            <feGaussianBlur result=\"blurOut\" in=\"offOut\" stdDeviation=\".1\" />\n            <feBlend in=\"SourceGraphic\" in2=\"blurOut\" mode=\"normal\" />\n          </filter>\n        </defs>\n        {flows}\n      </g>\n  );\n};\n\nexport default IngredientList;\n"]},"metadata":{},"sourceType":"module"}