{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/elimunn/Desktop/plot-recipes/site/src/components/plot/plot.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState, useEffect } from 'react';\nimport { select, ascending, transition, easeCubicIn, easeCubicOut } from 'd3';\nimport Vessel from './vessels/vessels.js';\nimport IngredientNode from './ingredients/ingredientNode.js';\nimport Action from './actions/actions.js';\nimport color from '../../media/theme/colors.json';\nimport dim from '../../media/theme/dim.json';\n\nconst Plot = ({\n  recipe\n}) => {\n  _s();\n\n  const [focus, setFocus] = useState(false);\n  useEffect(() => {\n    if (!(focus == false)) {\n      var cur = select(focus[0].parentElement);\n      var others = select(focus[0].parentElement.parentElement).selectAll('g');\n      var t1 = transition().duration(180).ease(easeCubicOut);\n      var t2 = transition().duration(1000).ease(easeCubicIn);\n      others // .attr('filter', 'none')\n      // .attr('opacity', 1)\n      // .transition(t1)\n      .attr('filter', 'url(#blur)').attr('opacity', .3);\n      cur.attr('filter', 'none').attr('opacity', 1);\n      var curX = cur.select('circle').attr('cx');\n      var curY = cur.select('circle').attr('cy');\n      console.log(cur);\n      var rect = cur.append('rect').attr('x', +curX + 10).attr('y', +curY - dim.i.font.size - 1).attr('width', 160).attr('height', dim.i.font.size * 2).attr('fill', color.background).attr('opacity', 1);\n      var amt = cur.append('text').attr('x', +curX + 10).attr('y', +curY).attr('fill', color.blue2).attr('font-size', dim.i.font.detailSize).attr('alignment-baseline', 'middle').text(focus[1].data.detail);\n      amt.raise();\n\n      if (!(prevFocus.current == false)) {\n        var prev = select(prevFocus.current);\n\n        if (prev.attr('class') == 'vessel') {\n          prev.select('.vesselShape').attr('stroke-width', dim.vessel.shape.stroke);\n          prev.selectAll('text').attr('font-size', dim.vessel.shape.textSize);\n        }\n\n        if (prev.attr('class') == 'action') {\n          var imageX2 = prev.select('image').attr('x');\n          var imageY2 = prev.select('image').attr('y');\n          prev.select('text').attr('font-size', dim.ingredient.textSize);\n          prev.select('image').transition(t1).attr('height', dim.vessel.action.radius).attr('x', +imageX2 + 6).attr('y', +imageY2 + 6);\n        }\n\n        if (prev.attr('class') == 'ingredient') {\n          prev.select('path').attr('stroke-width', dim.ingredient.nodeStroke);\n          prev.select('rect').attr('stroke-width', dim.ingredient.strokeWidth);\n          prev.select('.name').attr('font-size', dim.ingredient.textSize);\n          prev.select('.amount').attr('font-size', dim.ingredient.amountSize);\n        }\n      }\n\n      prevFocus.current = focusG;\n    }\n  }, [focus]);\n  var root = recipe;\n  var allVessels = root.descendants().filter(d => 'vessel' in d.data).filter(d => d.depth !== 0).sort((a, b) => {\n    return ascending(a.data.stepOrder, b.data.stepOrder);\n  });\n  var flows = [];\n  allVessels.forEach((a, i) => {\n    const vessel = [];\n    vessel.push( /*#__PURE__*/_jsxDEV(Vessel, {\n      a: a,\n      i: i,\n      dim: dim,\n      color: color\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this));\n    const ingredientNodes = [];\n    a.children.forEach((b, j) => {\n      if ('ingredient' in b.data) {\n        ingredientNodes.push( /*#__PURE__*/_jsxDEV(IngredientNode, {\n          color: color,\n          dim: dim,\n          a: a,\n          b: b,\n          j: j,\n          focus: focus,\n          setFocus: setFocus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this));\n      }\n    });\n    const actionNodes = [];\n    a.children.forEach((b, j) => {\n      if ('action' in b.data) {\n        actionNodes.push( /*#__PURE__*/_jsxDEV(Action, {\n          color: color,\n          dim: dim,\n          a: a,\n          b: b,\n          j: j\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this));\n      }\n    });\n    flows.push( /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [vessel, actionNodes, ingredientNodes]\n    }, void 0, true));\n  });\n  return /*#__PURE__*/_jsxDEV(\"g\", {\n    transform: `translate(${0}, ${50})`,\n    children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n      children: [/*#__PURE__*/_jsxDEV(\"filter\", {\n        id: \"blur\",\n        x: \"-0.08\",\n        y: \"0\",\n        children: [/*#__PURE__*/_jsxDEV(\"feGaussianBlur\", {\n          in: \"SourceGraphic\",\n          stdDeviation: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"feOffset\", {\n          dx: \"0\",\n          dy: \"0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"filter\", {\n        id: \"shadow\",\n        x: \"0\",\n        y: \"0\",\n        width: \"200%\",\n        height: \"200%\",\n        children: [/*#__PURE__*/_jsxDEV(\"feOffset\", {\n          result: \"offOut\",\n          in: \"SourceAlpha\",\n          dx: \".1\",\n          dy: \".1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"feGaussianBlur\", {\n          result: \"blurOut\",\n          in: \"offOut\",\n          stdDeviation: \".1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"feBlend\", {\n          in: \"SourceGraphic\",\n          in2: \"blurOut\",\n          mode: \"normal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }, this), flows]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 167,\n    columnNumber: 7\n  }, this);\n};\n\n_s(Plot, \"N5IKLjptcG5OVcWGm4B8SW9VRHY=\");\n\n_c = Plot;\nexport default Plot;\n\nvar _c;\n\n$RefreshReg$(_c, \"Plot\");","map":{"version":3,"sources":["/Users/elimunn/Desktop/plot-recipes/site/src/components/plot/plot.js"],"names":["React","useRef","useState","useEffect","select","ascending","transition","easeCubicIn","easeCubicOut","Vessel","IngredientNode","Action","color","dim","Plot","recipe","focus","setFocus","cur","parentElement","others","selectAll","t1","duration","ease","t2","attr","curX","curY","console","log","rect","append","i","font","size","background","amt","blue2","detailSize","text","data","detail","raise","prevFocus","current","prev","vessel","shape","stroke","textSize","imageX2","imageY2","ingredient","action","radius","nodeStroke","strokeWidth","amountSize","focusG","root","allVessels","descendants","filter","d","depth","sort","a","b","stepOrder","flows","forEach","push","ingredientNodes","children","j","actionNodes"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport { select, ascending, transition, easeCubicIn, easeCubicOut } from 'd3';\n\nimport Vessel from './vessels/vessels.js';\nimport IngredientNode from './ingredients/ingredientNode.js';\nimport Action from './actions/actions.js';\nimport color from '../../media/theme/colors.json';\nimport dim from '../../media/theme/dim.json';\n\nconst Plot = ({recipe}) => {\n\n  const [focus, setFocus] = useState(false);\n\n  useEffect(() => {\n\n    if(!(focus == false)){\n        var cur = select(focus[0].parentElement)\n        var others = select(focus[0].parentElement.parentElement).selectAll('g')\n\n        var t1 = transition()\n          .duration(180)\n          .ease(easeCubicOut)\n        var t2 = transition()\n          .duration(1000)\n          .ease(easeCubicIn)\n\n\n        others\n          // .attr('filter', 'none')\n          // .attr('opacity', 1)\n          // .transition(t1)\n          .attr('filter', 'url(#blur)')\n          .attr('opacity', .3)\n\n        cur\n          .attr('filter', 'none')\n          .attr('opacity', 1)\n\n\n        var curX = cur.select('circle').attr('cx')\n        var curY = cur.select('circle').attr('cy')\n\n        console.log(cur)\n\n        var rect = cur.append('rect')\n          .attr('x', +curX + 10)\n          .attr('y', +curY - dim.i.font.size - 1)\n          .attr('width', 160)\n          .attr('height', dim.i.font.size * 2)\n          .attr('fill', color.background)\n          .attr('opacity', 1)\n\n        var amt = cur.append('text')\n          .attr('x', +curX + 10)\n          .attr('y', +curY)\n          .attr('fill', color.blue2)\n          .attr('font-size', dim.i.font.detailSize)\n          .attr('alignment-baseline', 'middle')\n          .text( focus[1].data.detail )\n        amt.raise()\n\n        if (!(prevFocus.current == false)){\n          var prev = select(prevFocus.current)\n\n          if (prev.attr('class') == 'vessel'){\n            prev.select('.vesselShape')\n              .attr('stroke-width', dim.vessel.shape.stroke)\n            prev.selectAll('text')\n              .attr('font-size', dim.vessel.shape.textSize)\n          }\n\n          if (prev.attr('class') == 'action'){\n            var imageX2 = prev.select('image').attr('x')\n            var imageY2 = prev.select('image').attr('y')\n            prev.select('text')\n              .attr('font-size', dim.ingredient.textSize)\n            prev.select('image')\n              .transition(t1)\n              .attr('height', dim.vessel.action.radius)\n              .attr('x', + (imageX2) + 6)\n              .attr('y', + (imageY2) + 6)\n          }\n\n          if (prev.attr('class') == 'ingredient'){\n            prev.select('path')\n              .attr('stroke-width', dim.ingredient.nodeStroke)\n            prev.select('rect')\n              .attr('stroke-width', dim.ingredient.strokeWidth)\n            prev.select('.name')\n              .attr('font-size', dim.ingredient.textSize)\n            prev.select('.amount')\n              .attr('font-size', dim.ingredient.amountSize)\n          }\n\n\n\n\n\n        }\n        prevFocus.current = focusG\n\n      }\n    }, [focus])\n\n\n\n  var root = recipe\n\n  var allVessels = root.descendants().filter(d => ('vessel' in d.data)).filter(d => (d.depth !== 0)).sort((a,b) => {return ascending(a.data.stepOrder, b.data.stepOrder)} )\n\n  var flows = []\n\n  allVessels.forEach((a,i) => {\n\n    const vessel = []\n    vessel.push(\n      <Vessel\n        a={a}\n        i={i}\n        dim={dim}\n        color={color}\n      />\n    )\n\n    const ingredientNodes = []\n\n    a.children.forEach((b,j) => {\n      if ('ingredient' in b.data) {\n        ingredientNodes.push(\n          <IngredientNode\n            color={color}\n            dim={dim}\n            a={a}\n            b={b}\n            j={j}\n            focus={focus}\n            setFocus={setFocus}\n          />)\n        }\n      })\n\n    const actionNodes = []\n\n    a.children.forEach((b,j) => {\n      if ('action' in b.data) {\n        actionNodes.push(\n          <Action\n            color={color}\n            dim={dim}\n            a={a}\n            b={b}\n            j={j}\n          />)\n        }\n      })\n\n    flows.push(\n      <>\n        {vessel}\n        {actionNodes}\n        {ingredientNodes}\n      </>\n    )\n  })\n\n  return (\n      <g transform={`translate(${0}, ${50})`}>\n        <defs>\n          <filter id=\"blur\" x=\"-0.08\" y=\"0\">\n            <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"1\" />\n            <feOffset dx=\"0\" dy=\"0\" />\n          </filter>\n          <filter id=\"shadow\" x=\"0\" y=\"0\" width=\"200%\" height=\"200%\">\n            <feOffset result=\"offOut\" in=\"SourceAlpha\" dx=\".1\" dy=\".1\" />\n            <feGaussianBlur result=\"blurOut\" in=\"offOut\" stdDeviation=\".1\" />\n            <feBlend in=\"SourceGraphic\" in2=\"blurOut\" mode=\"normal\" />\n          </filter>\n        </defs>\n        {flows}\n      </g>\n  );\n};\n\nexport default Plot;\n"]},"metadata":{},"sourceType":"module"}